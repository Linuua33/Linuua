<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>歌手音樂播放頁面</title>
    <style>
    /* 在這裡放入你的 CSS 樣式 */
    body {
        font-family: 'Arial', sans-serif;
        background-color: #181c24; /* 與主頁面保持一致的背景色 */
        color: #f5f6fa;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        box-sizing: border-box;
    }
    .music-container {
        background-color: transparent; /* <-- 這裡修改為透明，移除大格子背景 */
        padding: 40px;
        border-radius: 15px;
        /* box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5); /* 可以選擇性移除或調弱陰影 */
        text-align: center;
        max-width: 900px;
        width: 100%;
        margin-top: 50px;
        z-index: 1;
    }
    h1 {
        color: #80ffe7;
        font-size: 2.5rem;
        margin-bottom: 30px;
        text-shadow: 0 0 10px rgba(128, 255, 231, 0.4);
    }
    .song-cards-grid {
        display: flex;
        flex-direction: column;
        gap: 15px;
        margin-top: 30px;
        width: 100%;
    }

    /* 單個歌曲卡片樣式調整 */
    .song-card {
        background-color: rgba(90, 98, 112, 0.1); /* <-- 接近透明的背景色，alpha 值設為 0.1 */
        border: 1px solid rgba(128, 255, 231, 0.2); /* <-- 淺色邊框，保持可分辨性 */
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); /* 預設陰影可以更淡 */
        display: flex;
        align-items: center;
        padding: 15px 20px;
        transition: background-color 0.4s ease, transform 0.3s ease, box-shadow 0.3s ease, border-color 0.4s ease; /* 增加邊框顏色的過渡 */
    }
    .song-card:hover {
        background-color: rgba(90, 98, 112, 0.6); /* <-- 鼠標懸停時變得明顯 */
        transform: translateY(-5px); /* <-- 浮起來更多 */
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5); /* <-- 懸停時陰影更明顯 */
        border-color: #80ffe7; /* <-- 懸停時邊框顏色變亮 */
    }
    .song-card img {
        width: 70px;
        height: 70px;
        border-radius: 8px;
        object-fit: cover;
        object-position: center;
        margin-right: 20px;
        flex-shrink: 0;
    }
    .song-card h3 {
        font-size: 1.25rem;
        margin: 0;
        color: #f5f6fa;
        text-align: left;
        flex-grow: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    .song-card-links {
        display: flex;
        gap: 15px;
        margin-left: 20px;
        flex-shrink: 0;
    }
    .song-card-links a {
        background-color: rgba(109, 118, 133, 0.7); /* 連結按鈕的背景色也稍微透明 */
        color: #f5f6fa;
        padding: 10px 18px;
        border-radius: 5px;
        text-decoration: none;
        font-size: 1rem;
        transition: background-color 0.3s ease;
        white-space: nowrap;
    }
    .song-card-links a:hover {
        background-color: #6a7280; /* 連結按鈕的 hover 顏色保持 */
    }
    .back-button-music {
        background-color: #ffe780;
        color: #181c24;
        padding: 12px 25px;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        text-decoration: none;
        display: inline-block;
        margin-top: 30px;
    }
    .back-button-music:hover {
        background-color: #ffda47;
        transform: translateY(-2px);
    }

    /* 螢火蟲背景樣式 (保持不變) */
    .firefly-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
    }
    .firefly {
        position: absolute;
        width: 6px;
        height: 6px;
        background: radial-gradient(circle, #ffe780 0%, transparent 70%);
        border-radius: 50%;
        opacity: 0;
        transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
    }

    /* RWD 響應式調整 */
    @media (max-width: 768px) {
        .music-container {
            padding: 20px;
            margin-top: 20px;
        }
        h1 {
            font-size: 2rem;
        }
        .song-card {
            flex-direction: row; 
            align-items: center; 
            padding: 15px;
        }
        .song-card img {
            width: 60px;
            height: 60px;
            margin-right: 15px;
            margin-bottom: 0;
        }
        .song-card h3 {
            font-size: 1.1rem;
            text-align: left;
            width: auto;
            margin-bottom: 0;
            flex-grow: 1;
        }
        .song-card-links {
            margin-left: 15px;
            width: auto;
            justify-content: flex-end;
        }
        .song-card-links a {
            padding: 8px 12px;
            font-size: 0.9rem;
        }
    }
</style>
</head>
<body>
    <div class="firefly-container"></div>

    <div class="music-container">
        <h1 id="singer-music-name"></h1>
        <div class="song-cards-grid" id="song-list-area">
            </div>
        <a href="cm.html" class="back-button-music">返回歌手列表</a>
    </div>

    <script>
        // 歌手音樂數據庫 (與之前相同，不需要改動此部分的數據內容)
        const singerMusicData = {
            "lironghao": {
                name: "李榮浩",
                songs: [
                    { title: "李白", image: "https://i.kfs.io/album/global/269252149,1v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/TYkraL8lGziN52AdS3", youtubeLink: "https://youtu.be/xbwqkqv5ljo?feature=shared" },
                    { title: "模特", image: "https://s1.dmcdn.net/v/F200M1Vn_yR2vk8RF/x1080", kkboxLink: "https://www.kkbox.com/tw/tc/song/0stEdsfyDz1b9il2IM", youtubeLink: "https://youtu.be/7LBUcOVmD6A?feature=shared" },
                    { title: "年少有為", image: "https://i.ytimg.com/vi/Dnj5Tcpev0Q/sddefault.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/CqPIpfJCUh-7-eRM9o", youtubeLink: "https://www.youtube.com/watch?v=Dnj5Tcpev0Q" },
                    { title: "不遺憾", image: "https://d1jusy9h1wnoke.cloudfront.net/youtube/9c5b0b0d-d8a5-5744-9515-d6c9f7e31e52-480.jpg?1619745964", kkboxLink: "https://www.kkbox.com/tw/tc/song/I94vV_03tC.qf2w0Yq", youtubeLink: "https://www.youtube.com/watch?v=fU8PV4tHV1Q" },
                    { title: "不將就", image: "https://i.kfs.io/album/global/12698507,3v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/OkAmzsUHwySdLQyF43", youtubeLink: "https://www.youtube.com/watch?v=a9ot-Fa9KHk" }
                ]
            },
            "wangxinling": {
                name: "王心凌",
                songs: [
                    { title: "愛你", image: "https://i.kfs.io/album/global/71586272,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/HaXvGbClE8K3Ye4GGn", youtubeLink: "https://www.youtube.com/watch?v=NAODcPQcy9U" },
                    { title: "睫毛彎彎", image: "https://i.kfs.io/album/global/71586286,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/CtPo7sd1USEGYaVDjy", youtubeLink: "https://www.youtube.com/watch?v=FzKO6WZN5b4" },
                    { title: "月光", image: "https://i.kfs.io/album/global/87843141,1v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/HZ8j8KAiEYKfnnHH-P", youtubeLink: "https://www.youtube.com/watch?v=VPlpJ-c1P1E" },
                    { title: "變成陌生人", image: "https://i.kfs.io/artist/global/5306,0v18/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/CrQNhwDBa7_3NSRVhi", youtubeLink: "https://www.youtube.com/watch?v=3B4fyi-xXzo" },
                    { title: "大眠", image: "https://i.kfs.io/album/global/261344495,1v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/KlL3a6R4BZNAChbDs4", youtubeLink: "https://www.youtube.com/watch?v=VS1lvYuW3LQ" }
                ]
            },
            "mayday": {
                name: "五月天",
                songs: [
                    { title: "倔強", image: "https://i.kfs.io/album/global/233994980,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/WlKH8SohHya3DInwhd", youtubeLink: "https://www.youtube.com/watch?v=R2s-H_crYkc" },
                    { title: "突然好想你", image: "https://i.kfs.io/album/global/80607081,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/hk/tc/song/HaX18JN1E8K3aEHmSe", youtubeLink: "https://www.youtube.com/watch?v=GtDRcXtDg-4" },
                    { title: "乾杯", image: "https://i.ytimg.com/vi/qX2GsMj7154/maxresdefault.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/DZ0JY5x6M7EsrsuND8", youtubeLink: "https://www.youtube.com/watch?v=qX2GsMj7154" },
                    { title: "知足", image: "https://i.kfs.io/album/tw/300180,0v3/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/4keWXxwvWkaL_-hooL", youtubeLink: "https://www.youtube.com/watch?v=_o0oeyCtoFA" },
                    { title: "傷心的人別聽慢歌", image: "https://lineimg.omusic.com.tw/img/album/1047730.jpg?v=20200319215604", kkboxLink: "https://www.kkbox.com/tw/tc/song/4H700T_qK.W4uB04uB02", youtubeLink: "https://www.youtube.com/watch?v=xWTiOqJqkk0" }
                ]
            },
             "dengziqi": {
                name: "鄧紫棋",
                songs: [
                    { title: "孤獨", image: "https://i.kfs.io/album/global/89774978,3v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/CsjeT7693ZiY05nBv5", youtubeLink: "https://www.youtube.com/watch?app=desktop&v=CvgNQmXqX9M&t=21m00s" },
                    { title: "泡沫", image: "https://i.kfs.io/album/tw/1557571,1v2/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/Wpjr0kRraMOw-_7LJM", youtubeLink: "https://www.youtube.com/watch?v=GHXr4bBxHCo" },
                    { title: "差不多姑娘", image: "https://i.kfs.io/album/global/67268438,2v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/hk/tc/song/DYZsy_4bri5YR53KAi", youtubeLink: "https://www.youtube.com/watch?v=s4pxJ-1QLQg" },
                    { title: "來自天堂的魔鬼", image: "https://i1.sndcdn.com/artworks-000551214735-n8qhna-t500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/8lhP1ixHvIvolKs9zd", youtubeLink: "https://www.youtube.com/watch?v=FWtbGkpdoP4" },
                    { title: "再見", image: "https://i1.sndcdn.com/artworks-000236317722-6fta8g-t500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/9XYIyFhS3wYrAoJqo7", youtubeLink: "https://www.youtube.com/watch?app=desktop&v=Lhel0tzHE08" }
                ]
            },
            "WSL": {
                name: "汪蘇瀧",
                songs: [
                    { title: "全世界陪我失眠", image: "https://i.kfs.io/album/global/98096647,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/4ms1aY8Hf387oTggIb", youtubeLink: "https://www.youtube.com/watch?v=8M6WUBKLKtg" },
                    { title: "你讓我懂", image: "https://i.kfs.io/album/global/67044360,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/PYrnekpyNHxJvYllYM", youtubeLink: "https://www.youtube.com/watch?v=fHjmQn6C-3s" },
                    { title: "我想念", image: "https://i.kfs.io/album/tw/258419929,1v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/SphOQfvM1sYnoD_4bX", youtubeLink: "https://www.youtube.com/watch?v=AOT5XWGLzJE" },
                    { title: "晴", image: "https://i.kfs.io/album/global/67796875,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/OkkkR6RnwySdLpof-Y", youtubeLink: "https://www.youtube.com/watch?v=yJEzuMn2cKs" },
                    { title: "眼淚落下之前", image: "https://i.kfs.io/album/global/171854031,1v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/hk/tc/song/OosuEpza32AqaI9PYe", youtubeLink: "https://www.youtube.com/watch?v=KymBnVRpG1w" }
                ]
            },
            "By2": {
                name: "By2",
                songs: [
                    { title: "不哭了", image: "https://i.scdn.co/image/ab67616d0000b273856ee823d66add22d09f59ae", kkboxLink: "https://www.kkbox.com/tw/tc/song/9XuzR3sC3wYrBL4BmZ", youtubeLink: "https://www.youtube.com/watch?v=V_nC4IGAkH8" },
                    { title: "愛丫愛丫", image: "https://i.kfs.io/album/global/149869695,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/1-wOBCZnWDhif6RJUZ", youtubeLink: "https://www.youtube.com/watch?v=a8DtaQwDawI" },
                    { title: "沒理由", image: "https://i.kfs.io/album/global/150844146,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/ClW4A8joFKtg27ZxJI", youtubeLink: "https://www.youtube.com/watch?v=DG660Jijr1A" },
                    { title: "有沒有", image: "https://i.kfs.io/album/global/157868,1v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/hk/tc/song/Gk1Ril3OnSw3QNYTg0", youtubeLink: "https://www.youtube.com/watch?v=4MwC38ip--k" },
                    { title: "當時的我們", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSDw5jMVrEHOfS3Yr7gURP8tqPIRVPzCoUU9g&s", kkboxLink: "https://www.kkbox.com/tw/tc/song/L_QxlunZ_NyBpsLSk7", youtubeLink: "https://www.youtube.com/watch?v=VxK5S5NOAjc" }
                ]
            },
            "zhouxingzhe": {
                name: "周興哲",
                songs: [
                    { title: "以後別做朋友", image: "https://i.kfs.io/album/tw/5239767,4v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/4nb7Wl043TYuoUbhoN", youtubeLink: "https://www.youtube.com/watch?v=Ew4VvF0DPMc" },
                    { title: "你，好不好？", image: "https://i.kfs.io/album/global/17250268,4v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/hk/tc/song/GqF39RC_Hxj7OoasVL", youtubeLink: "https://www.youtube.com/watch?v=wSBXfzgqHtE" },
                    { title: "怎麼了", image: "https://i.kfs.io/album/global/45771662,4v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/DYbpFU6Lri5YQldtJT", youtubeLink: "https://www.youtube.com/watch?v=Y2ge3KrdeWs" },
                    { title: "如果雨之後", image: "https://i.kfs.io/album/global/30791798,4v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/DYUwfs7bri5YSoTpTf", youtubeLink: "https://www.youtube.com/watch?v=gdGdO6KjF1I" },
                    { title: "終於了解自由", image: "https://lineimg.omusic.com.tw/img/album/1822641.jpg?v=20241223103313", kkboxLink: "https://www.kkbox.com/tw/tc/song/KrU29oU36Il0DvUzen", youtubeLink: "https://www.youtube.com/watch?v=BVK_Q6KZSUI" }
                ]
            },
            "alin": {
                name: "A-Lin",
                songs: [
                    { title: "失戀無罪", image: "https://i.scdn.co/image/ab67616d0000b27365b9a5bfde1f4c8d9604c6ba", kkboxLink: "https://www.kkbox.com/hk/tc/song/HXSGRrboaXJ8bk__hW", youtubeLink: "https://www.youtube.com/watch?v=lmFlqWPzl-E" },
                    { title: "給我一個理由忘記", image: "https://lineimg.omusic.com.tw/img/album/1018072.jpg?v=20201217160943", kkboxLink: "https://www.kkbox.com/hk/tc/song/OkFfoHUnwySdIVB-IC", youtubeLink: "https://www.youtube.com/watch?v=F5FlN-NBGo8" },
                    { title: "摯友", image: "https://i.kfs.io/album/global/164614956,1v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/TXSpgFxHAIGG3e047p", youtubeLink: "https://www.youtube.com/watch?v=vGqpGFH3vh8" },
                    { title: "幸福了然後呢", image: "https://i1.sndcdn.com/artworks-000036127197-he5px8-t500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/4t3XT6cILX0lFIECwh", youtubeLink: "https://www.youtube.com/watch?v=hEtxIreCn68" },
                    { title: "寂寞不痛", image: "https://i.scdn.co/image/ab67616d0000b273e2b0c00178975b04b23691dc", kkboxLink: "https://www.kkbox.com/tw/tc/song/XZm4r195IDECqQEwfi", youtubeLink: "https://www.youtube.com/watch?v=6EmGkxFscmw" }
                ]
            },
            "linjunjie": {
                name: "林俊傑",
                songs: [
                    { title: "江南", image: "https://i.kfs.io/album/tw/51585,0v3/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/PZWsKvHlfVd6hFLyTU", youtubeLink: "https://www.youtube.com/watch?v=G97_rOdHcnY" },
                    { title: "修煉愛情", image: "https://i.kfs.io/album/global/255989870,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/WriOaqg3HVANIh0dwY", youtubeLink: "https://www.youtube.com/watch?v=LWV-f6dMN3Q" },
                    { title: "不為誰而作的歌", image: "https://i.kfs.io/album/global/11203226,4v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/OlJ8azjoS497b5mvYl", youtubeLink: "https://www.youtube.com/watch?v=gd38-X3HpbM" },
                    { title: "黑騎士", image: "https://i.ytimg.com/vi/7JrWjKlNPFY/hqdefault.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/9a9DvlBd1jmuL5Q0Ia", youtubeLink: "https://www.youtube.com/watch?v=gvce2ywrSsI" },
                    { title: "可惜沒如果", image: "https://i.kfs.io/album/global/147763142,0v1/fit/500x500.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/CkLJNw76nNz68RwQ3X", youtubeLink: "https://www.youtube.com/watch?v=vsBf_0gDxSM" }
                ]
            },
            "caiyilin": {
                name: "蔡依林",
                songs: [
                    { title: "愛的羅曼死", image: "https://media.vogue.com.tw/photos/5db7e88222a7000008dc9c56/master/w_1600%2Cc_limit/2019062444650781.jpg", kkboxLink: "https://www.kkbox.com/hk/en/song/4tciwgbYLX0lFOSW_z", youtubeLink: "https://www.youtube.com/watch?v=WlL0DsoqmEM" },
                    { title: "pleasure", image: "https://media.gq.com.tw/photos/6826de983585c173aebb659b/master/w_1600%2Cc_limit/498583654_1235447311276399_781342017336413567_n.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/KqUbPL2R3UapERXGtg", youtubeLink: "https://www.youtube.com/watch?v=j1TTQREaZMg" },
                    { title: "怪美的", image: "https://upload.wikimedia.org/wikipedia/zh/4/42/Jolin_Tsai_-_Ugly_Beauty_%28single%29.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/PXibuuS78IwsCY4FCY", youtubeLink: "https://www.youtube.com/watch?v=-wIHmPAvMBo" },
                    { title: "你也有今天", image: "https://media.vogue.com.tw/photos/5db7f2f1c2e36100085b056d/master/w_1600%2Cc_limit/2019050645196477.JPG", kkboxLink: "https://www.kkbox.com/tw/tc/song/DXYEHxZig_DL8tmMzk", youtubeLink: "https://www.youtube.com/watch?v=jhR1d6Cssic" },
                    { title: "大藝術家", image: "https://upload.wikimedia.org/wikipedia/zh/d/d6/Jolin_Tsai_-_The_Great_Artist.jpg", kkboxLink: "https://www.kkbox.com/tw/tc/song/DYMLJN-Lri5YQbkoCQ", youtubeLink: "https://www.youtube.com/watch?v=bWx-vtCSg0w" }
                ]
            },
        };

        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const singerId = params.get('singer');

            const singerMusicNameElem = document.getElementById('singer-music-name');
            const songListArea = document.getElementById('song-list-area');

            if (singerId && singerMusicData[singerId]) {
                const singer = singerMusicData[singerId];
                singerMusicNameElem.textContent = singer.name + " 的音樂";
                document.title = singer.name + " 的音樂 - 避難所";

                songListArea.innerHTML = ''; // 清空現有內容
                singer.songs.forEach(song => {
                    const songCard = document.createElement('div');
                    songCard.className = 'song-card'; // 設置 class

                    // 組裝 HTML 結構
                    songCard.innerHTML = `
                        <img src="${song.image}" alt="${song.title} 封面">
                        <h3>${song.title}</h3>
                        <div class="song-card-links">
                            ${song.kkboxLink ? `<a href="${song.kkboxLink}" target="_blank">KKBOX</a>` : ''}
                            ${song.youtubeLink ? `<a href="${song.youtubeLink}" target="_blank">YouTube</a>` : ''}
                        </div>
                    `;
                    songListArea.appendChild(songCard);
                });

            } else {
                singerMusicNameElem.textContent = "未找到歌手音樂信息";
                songListArea.innerHTML = '';
                document.title = "音樂未找到 - 避難所";
            }

            // 螢火蟲 JavaScript 邏輯 (保持不變)
            const fireflyContainer = document.querySelector('.firefly-container');
            const minFireflies = 15;
            const fireflies = [];

            function getRandomInt(min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function animateFirefly(firefly) {
                function flicker() {
                    firefly.style.left = `${getRandomInt(0, 100)}%`;
                    firefly.style.top = `${getRandomInt(0, 100)}%`;
                    firefly.style.display = 'block';

                    const flickerCount = getRandomInt(1, 3);
                    let currentFlicker = 0;

                    const singleFlickerDuration = getRandomInt(300, 600);
                    const pauseBetweenFlickers = getRandomInt(50, 150);

                    const doSingleFlicker = () => {
                        if (currentFlicker < flickerCount) {
                            firefly.style.opacity = 1;
                            firefly.style.transform = `scale(${getRandomInt(10, 15) / 10})`;
                            setTimeout(() => {
                                firefly.style.opacity = 0;
                                firefly.style.transform = 'scale(1)';
                                currentFlicker++;
                                if (currentFlicker < flickerCount) {
                                    setTimeout(doSingleFlicker, pauseBetweenFlickers);
                                } else {
                                    const nextFlickerDelay = getRandomInt(1000, 5000);
                                    setTimeout(flicker, nextFlickerDelay);
                                }
                            }, singleFlickerDuration);
                        }
                    };
                    doSingleFlicker();
                }
                const initialDelay = getRandomInt(0, 2000);
                setTimeout(flicker, initialDelay);
            }

            for (let i = 0; i < minFireflies; i++) {
                const firefly = document.createElement('span');
                firefly.className = 'firefly';
                fireflyContainer.appendChild(firefly);
                fireflies.push(firefly);
                animateFirefly(firefly);
            }
        });
    </script>
</body>
</html>